<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_27) on Tue Mar 12 11:54:35 CET 2013 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
net.joala.dns (Joala BOM 0.9.0-SNAPSHOT API)
</TITLE>

<META NAME="date" CONTENT="2013-03-12">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="net.joala.dns (Joala BOM 0.9.0-SNAPSHOT API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Package</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-use.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../net/joala/data/random/package-summary.html"><B>PREV PACKAGE</B></A>&nbsp;
&nbsp;<A HREF="../../../net/joala/expression/package-summary.html"><B>NEXT PACKAGE</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?net/joala/dns/package-summary.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<H2>
Package net.joala.dns
</H2>

  Joala DNS is meant for tests which normally would need to modify the <code>etc/hosts</code> file of your system.
<P>
<B>See:</B>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="#package_description"><B>Description</B></A>
<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../net/joala/dns/LocalDNSNameService.html" title="class in net.joala.dns">LocalDNSNameService</A></B></TD>
<TD>
 Central class for Joala DNS.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../net/joala/dns/LocalDNSNameServiceDescriptor.html" title="class in net.joala.dns">LocalDNSNameServiceDescriptor</A></B></TD>
<TD>
 Constructs the <A HREF="../../../net/joala/dns/LocalDNSNameService.html" title="class in net.joala.dns"><CODE>LocalDNSNameService</CODE></A> and returns references to it.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../net/joala/dns/NameStore.html" title="class in net.joala.dns">NameStore</A></B></TD>
<TD>
 This store is responsible for overriding calls for resolving host names.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../net/joala/dns/NameStoreTestWatcher.html" title="class in net.joala.dns">NameStoreTestWatcher</A></B></TD>
<TD>
 Use this test watcher in order to ensure that tests modifying the DNS
 entries don't influence each other.</TD>
</TR>
</TABLE>
&nbsp;

<P>
<A NAME="package_description"><!-- --></A><H2>
Package net.joala.dns Description
</H2>

<P>
<p>
  Joala DNS is meant for tests which normally would need to modify the <code>etc/hosts</code> file of your system.
  It serves as DNS name service.
</p>

<p><strong>Usage:</strong></p>

<p>
  The recommended usage is to set the JVM system property <code>sun.net.spi.nameservice.provider.1</code> to
  the Joala DNS identifier <code>dns,joala</code> (type and provider name). This will allow to override hostnames
  before they are looked up for the first time.
</p>

<p>
  In order to be able to redefine a hostname at runtime you have to disable caching as described in
  <A HREF="http://docs.oracle.com/javase/6/docs/api/java/net/InetAddress.html?is-external=true" title="class or interface in java.net"><CODE>InetAddress</CODE></A> which is to set the JVM security properties <code>networkaddress.cache.ttl</code> and
  <code>networkaddress.cache.negative.ttl</code> to <code>0</code> (zero). To do so add the following entries to
  a file for example named <a href="doc-files/java.joala.dns.security"><code>.java.joala.dns.security</code></a> in your
  user home folder:
</p>
<pre>
  // Disable caching to be able to remap when using Joala DNS.
  // This is the officially supported way for Java - while Joala DNS tries
  // its best effort via reflection that you don't need to do that.
  //
  // Usage:
  // * Copy for example to your user.home-folder
  // * Start your JVM with -Djava.security.properties=&lt;user-home>/.java.joala.dns.security
  //
  networkaddress.cache.ttl=0
  networkaddress.cache.negative.ttl=0
</pre>
<p>
  Having this the complete command line to add to your Java call is:
</p>
<pre>
  -Dsun.net.spi.nameservice.provider.1=dns,joala \
  -Djava.security.properties=&lt;user-home>/.java.joala.dns.policy
</pre>
<p>
  <strong>Fallback Strategies:</strong>
</p>

<p>
  Joala DNS has two implemented fallback strategies if it cannot resolve a hostname. You can specify them at
  command line with their IDs by setting the system property <code>net.joala.dns.fallbacks</code>. The default
  value is <code>dnsjava,default</code>. Any other value is ignored. Thus if you state for example an empty string
  or <code>disabled</code> no fallback strategies will be applied.
</p>
<ul>
  <li><strong>dnsjava:</strong> Use <a href="http://sourceforge.net/projects/dnsjava/">DNS Java</a> as fallback
    service.
  </li>
  <li><strong>default:</strong> Use JVMs default implementation. This is a fragile fallback when changing JVMs as
    it uses reflection to access private API.
  </li>
</ul>
<p>
  <strong>If you are Java 7...</strong>
</p>

<p>
  Since Java 7 these fallback strategies are not really necessary anymore as the Name Service lookup strategy
  implemented in <A HREF="http://docs.oracle.com/javase/6/docs/api/java/net/InetAddress.html?is-external=true" title="class or interface in java.net"><CODE>InetAddress</CODE></A> has changed from a single name service to a list of nameservices
  which you can give an order. Thus having this, your provider properties could look like this:
</p>
<pre>
  -Dsun.net.spi.nameservice.provider.1=dns,joala \
  -Dsun.net.spi.nameservice.provider.2=dns,dnsjava \
  -Dsun.net.spi.nameservice.provider.3=default
</pre>
<p>
  Which tells: Use Joala DNS first, if it fails to resolve a host, use DNS Java and eventually fallback to
  the default JVM implementation.
</p>

<p>
  <strong>Debugging:</strong>
</p>

<p>
  Joala DNS must not use any well known logging framework. This is because most of them require a DNS server
  to parse their XML configurations and such. That's why Joala DNS uses a comparable approach like DNS Java which
  is to use the System-PrintStreams err and out for reporting. By default all messages are disabled. Joala DNS
  honors the same settings like DNS Java to enable reporting. The easiest way to provide this at the command line:
</p>
<pre>
  -Ddnsjava.options=verbose
</pre>
<p>
  If you want to do that in from your Java code, then add this call:
</p>
<pre>
  org.xbill.DNS.Options.set("verbose");
</pre>
<p>
  <strong>References:</strong>
</p>
<ul>
  <li><a href="http://rkuzmik.blogspot.de/2006/08/local-managed-dns-java_11.html">Local Managed DNS (Java); Roman
    Kuzmik, 2006-08-11</a><br/>
    The initial blog post which paved my way to Joala DNS. Thanks, Roman!
  </li>
  <li><a href="http://javaeesupportpatterns.blogspot.de/2011/03/java-dns-cache-reference-guide.html">Java DNS Cache
    Reference Guide; by
    <a href="http://www.blogger.com/profile/15963955701683788257">Pierre-Hugues Charbonneau</a>, Java EE Support
    Patterns, 2011-10-03</a></li>
  <li><a href="http://sourceforge.net/projects/dnsjava/">DNS Java by Brian Wellington</a></li>
</ul>
<P>

<P>
<DL>
<DT><B>Since:</B></DT>
  <DD>10/6/12</DD>
</DL>
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Package</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-use.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../net/joala/data/random/package-summary.html"><B>PREV PACKAGE</B></A>&nbsp;
&nbsp;<A HREF="../../../net/joala/expression/package-summary.html"><B>NEXT PACKAGE</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?net/joala/dns/package-summary.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &#169; 2011-2013 <a href="http://www.coremedia.com/">CoreMedia AG</a>. Licensed under the Apache             License,             Version 2.0.
</BODY>
</HTML>
